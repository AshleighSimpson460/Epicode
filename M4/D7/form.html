<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>D7 Form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">D7 EPICODE</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="./frontend.html"
                >Store</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./form.html">Add Stock</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row justify-content-center" id="eCommerce">
        <div class="col-6">
          <form id="form">
            <div class="mt-3">
              <label for="brandName" class="form-label">Name:</label>
              <input type="text" class="form-control" id="brandName" />
            </div>
            <div class="mb-3">
              <label for="description" class="form-label">Description:</label>
              <input type="text" class="form-control" id="description" />
            </div>
            <div class="mb-3">
              <label for="BrandName" class="form-label">Brand:</label>
              <input type="text" class="form-control" id="brand" />
            </div>
            <div class="mb-3">
              <label for="brandPrice" class="form-label">Price:</label>
              <input type="number" class="form-control" id="brandPrice" />
            </div>
            <div class="mb-3">
              <label for="picture" class="form-label">Picture:</label>
              <input type="text" class="form-control" id="picture" />
            </div>
            <button
              type="button"
              class="btn btn-primary"
              onclick="submitForm(event)"
            >
              Submit
            </button>
          </form>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <!-- <script src="./script.js"></script> -->
    <script>
      const submitForm = function(event){
          const backendURL = "https://striveschool-api.herokuapp.com/api/product/";
          const brandName = document.getElementById("brandName");
          const description = document.getElementById("description");
          const brand = document.getElementById("brand");
          const brandPrice = document.getElementById("brandPrice");
          const image = document.getElementById("picture");
          const container = document.getElementById("eCommerce");
          const form = document.getElementById('form');
          

          const postBody = {
            name: brandName.value,
            description: description.value,
            brand: brand.value,
            imageUrl: image.value,
            price: Number(brandPrice.value).toFixed(2),
          };
        event.preventDefault();
        fetch(backendURL,{
          method: "POST",
          body: JSON.stringify(postBody),
          headers: {
            Authorization:
              "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NDFhNDY1ZWU3ZGE1MzAwMTNiNjZhZTIiLCJpYXQiOjE2Nzk0NDM1NTAsImV4cCI6MTY4MDY1MzE1MH0.bzDl7AP7acFQrVOzdIy1rEm1T9w1TChX53Vr8au-yP8",
            "Content-Type": "application/json",
          },
        }).then(brandName.value = '',
          description.value = '',
          brand.value = '',
          brandPrice.value = '',
          image.value = '');
        
      }      
    
    submitForm(event)
    </script>
  </body>
</html>
